= Build docker image to run agnosticd

== OSP provider

.build agnosticd image for openstack
----
docker build . -f Dockerfile-openstack -t agnosticd-openstack
----


.run agnosticd, example with agnosticd-openstack
----
docker run -t \
  --mount source=$(pwd),target=/ansible,type=bind \
  --mount source=/home/fridim/secrets,target=/secrets,type=bind \
  --mount source=/tmp/output_dir,target=/tmp/output_dir,type=bind \
  -w /ansible \
  agnosticd-openstack \
  ansible-playbook main.yml \
    -e @configs/ocp4-disconnected-osp-lab/sample_vars.yml \
    -e @/secrets/osp.yml
----

== AWS provider

.build agnosticd image for AWS
----
docker build . -f Dockerfile-aws -t agnosticd-aws
----

.run agnosticd, example with agnosticd-aws
----
docker run -t \
  --mount source=$(pwd),target=/ansible,type=bind \
  --mount source=/home/fridim/secrets,target=/secrets,type=bind \
  --mount source=/tmp/output_dir,target=/tmp/output_dir,type=bind \
  --mount source=~/.ssh,target=/root/.ssh,type=bind \
  -w /ansible \
  agnosticd-aws \
  ansible-playbook main.yml \
    -e @configs/ocp4-workshop/sample_vars.yml \
    -e @/secrets/gpte.yml
----
