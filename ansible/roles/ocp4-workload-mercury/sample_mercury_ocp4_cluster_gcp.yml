# -------------------------------------------------------------------
# ocp4-cluster on AWS. Bare bones, OpenShift 4 installed. No
# customizations.
# -------------------------------------------------------------------

# -------------------------------------------------------------------
# Mandatory Variables
# -------------------------------------------------------------------
cloud_provider: gcp
env_type: ocp4-cluster
software_to_deploy: openshift4
# -------------------------------------------------------------------
# End Mandatory Variables
# -------------------------------------------------------------------

# guid is the deployment unique identifier, it will be appended to all tags,
# files and anything that identifies this environment from another "just like it"
guid: m4r1

platform: labs
purpose: development

# User created on the bastion
#student_name: FROM_SECRET

# Cloud Region
gcp_region: FROM_SECRET

# Machine Type for control plane (master) nodes
master_instance_type: n1-standard-4

# Machine Type for worker nodes
worker_instance_type: n1-standard-4

# OpenShift Installer version to use
ocp4_installer_version: 4.4.9

# The Pull Secret to pull OpenShift images. Get from try.openshift.com
#ocp4_pull_secret: FROM_SECRET

# -------------------------------------------------------------------
# Repos
# -------------------------------------------------------------------

# RHN is used for RHEL repos
repo_method: 'none'
#repo_method: 'rhn'
#rhel_subscription_user: 'FROM_SECRET'
#rhel_subscription_pass: 'FROM_SECRET'

# Satellite
#satellite_url: FROM_SECRET
#satellite_org: FROM_SECRET
#satellite_activationkey: FROM_SECRET

# Update RHEL to the latest packages (and reboot)
update_packages: true

# -------------------------------------------------------------------
# OpenShift Cluster Customization
# -------------------------------------------------------------------

# Run infrastructure customization here.
infra_workloads: [ocp4-workload-authentication]

ocp4_workload_authentication_vars:
  idm_type: htpasswd
  admin_user: admin
  htpasswd_user_count: 0
ocp4_workload_authentication_secrets:
  htpasswd_admin_password: FROM SECRET

# Do not run any student customization.
# This will result in a default OpenShift 4 installation.
student_workloads: []

# -------------------------------------------------------------------
# GCP specific settings (from secrets usually)
# -------------------------------------------------------------------

# GCP Credentials
gcp_auth_type: 'serviceaccount'
gcp_account: FROM_SECRET
gcp_credentials_file: FROM_SECRET
gcp_project_id: FROM_SECRET

# cluster_dns_zone looks like google.example.com
#cluster_dns_zone: FROM_SECRET

# -------------------------------------------------------------------
# AgnosticV Settings
# -------------------------------------------------------------------

# Deploy in a Ansible 2.9 Virtualenv
#agnosticv_meta:
#  virtualenv: aws-ansible-2.9
