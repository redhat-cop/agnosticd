---

#hammer --output output_format organization list
#hammer content-view
#hammer lifecycle-environment

- name: Setting up satellite repository
  shell:  hammer repository-set enable 
    --organization "{{item.organization}}" 
    --product "{{item.product}}" 
    --basearch "{{item.basearch}}" 
    --name "{{item.name}}"
    --releasever "{{item.releasever}}"
  ignore_errors: yes
  when: item.releasever is defined
  loop: "{{ satellite_repository }}"
  tags:
    - satellite_configuration

- name: Setting up satellite repository
  shell:  hammer repository-set enable 
    --organization "{{item.organization}}" 
    --product "{{item.product}}" 
    --basearch "{{item.basearch}}" 
    --name "{{item.name}}"
  ignore_errors: yes
  when: item.releasever is not defined
  loop: "{{ satellite_repository }}"
  tags:
    - satellite_configuration

- name: Sync repo
  shell: hammer repository synchronize 
    --organization "{{item.organization}}" 
    --product "{{item.product}}" 
    --name "{{item.sync_name}}"
    --async
  loop: "{{ satellite_repository }}"
  tags:
    - satellite_configuration
