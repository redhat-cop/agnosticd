---
- name: remove projects
  vars:
    t_project_name: "{{ ocp4_workload_quarkus_superheroes_proj_name }}-{{ item[1] }}java{{ item[0] }}"
  k8s:
    api_version: project.openshift.io/v1
    kind: Project
    name: "{{ t_project_name }}"
    state: absent
  loop: "{{ ocp4_workload_quarkus_superheroes_java_versions | product(ocp4_workload_quarkus_superheroes_kinds) | list }}"

- name: remove AMQ Streams subscription
  k8s:
    api_version: operators.coreos.com/v1alpha1
    kind: Subscription
    name: amq-streams
    namespace: openshift-operators
    state: absent

- name: remove container security subscription
  k8s:
    api_version: operators.coreos.com/v1alpha1
    kind: Subscription
    name: container-security-operator
    namespace: openshift-operators
    state: absent

- name: Delete temp dir
  file:
    state: absent
    path: "{{ ocp4_workload_quarkus_superheroes_temp_dir }}"

- name: remove_workload tasks complete
  debug:
    msg: "Remove Workload tasks completed successfully."
  when: not silent | bool
