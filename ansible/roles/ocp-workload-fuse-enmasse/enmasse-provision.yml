# Plagarized from configs/ocp-workloads/ocp-workload.yml

- name: Prep enamsse 
  hosts: all
  become: false
  gather_facts: False
  vars_files:
    - "{{ ANSIBLE_REPO_PATH }}/configs/{{ env_type }}/env_vars.yml"
  tags:
    - step007

  roles:
    - role: "{{ ANSIBLE_REPO_PATH }}/roles/{{ocp_workload}}"

# invoke out-of-the-box playbook from enmasse project
- name: Deploy enmasse
  import_playbook: "{{enmasse_path}}/ansible/playbooks/openshift/multitenant.yml"
  when: ACTION == "create" or ACTION == "provision"
