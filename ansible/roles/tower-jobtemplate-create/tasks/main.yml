- name: Add tower JobTemplate
  tower_job_template:
    name: "{{ item.name }}"
    description: "{{ item.description  }}"
    job_type: run
    # ask_inventory: Yes
    inventory: "{{ item.inventory | d('empty-inventory')}}"
    # ask_credential: Yes
    vault_credential: "{{ item.vault_credential | d('') }}"
    ask_extra_vars: Yes
    project: "{{ item.project }}"
    playbook: "{{ item.playbook | d('main.yml') }}"
    become_enabled: "{{ item.become | d('no') }}"
    concurrent_jobs_enabled: Yes
    state: present
    tower_host: "{{ tower_hostname }}"  
    tower_username: admin
    tower_password: "{{tower_admin_password}}"
    tower_verify_ssl: false
  loop: "{{ tower_job_templates }}"
  tags:
    - tower-job-template-create
