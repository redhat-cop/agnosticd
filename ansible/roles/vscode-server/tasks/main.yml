---
- name: Nginx and vscode block
  become: "{{ vscode_server_ansible_become | default(omit) }}"
  block:

    - name: Set python interpreter for vscode
      when: vscode_server_ansible_python_interpreter is defined
      ansible.builtin.set_fact:
        ansible_python_interpreter: /usr/libexec/platform-python

    - name: Include nginx server task
      when: vscode_server_install_nginx | default(true) | bool
      ansible.builtin.include_tasks: nginx-server.yml

    - name: Include vscode server task
      when: vscode_server_install_vscode | default(true) | bool
      ansible.builtin.include_tasks: vscode-server.yml
    
    - name: Include automationcontroller nginx task
      when: vscode_server_use_automationcontroller_nginx | default(false) | bool
      ansible.builtin.include_tasks: automationcontroller-nginx.yml
