---
# Implement your Post Workload deployment tasks here
# --------------------------------------------------

- name: Get CNV Lab Workbook Route
  shell: oc get route/cnv -n workbook | awk '/cnv/ {print $2;}'
  register: getroute
  changed_when: false
  retries: 30
  delay: 5
  until: getroute is succeeded

- name: Print CNV Lab Workbook Route
  debug:
    msg: "CNV Lab Workbook: https://{{ getroute.stdout }}"
  when:
  - not silent|bool

# Leave these as the last tasks in the playbook
# ---------------------------------------------

# For deployment onto a dedicated cluster (as part of the
# cluster deployment) set workload_shared_deployment to False
# This is the default so it does not have to be set explicitely
- name: post_workload tasks complete
  debug:
    msg: "Post-Workload tasks completed successfully."
  when:
  - not silent|bool
  - not workload_shared_deployment|default(False)
