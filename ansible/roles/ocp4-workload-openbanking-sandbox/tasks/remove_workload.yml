---
# Implement your Workload removal tasks here

###
# 3scale Operator removal
#
- name: 'Project Mercury :: Run 3scale removal Tasks when module is enabled'
  include_tasks:
    file: ./threescale_removal.yaml
    apply:
      become: "{{ become_override | bool }}"

# Sets up the RWX storage provider required for 3scale
- name: Remove NFS Server workload that provides RWX storage class
  include_role:
    name: ocp4-workload-nfs-server
  vars:
    become_override: yes
    _nfs_provided_storage_class: "{{ nfs_provided_storage_class }}"

# Leave this as the last task in the playbook.
- name: remove_workload tasks complete
  debug:
    msg: "Remove Workload tasks completed successfully."
  when: not silent|bool
