ssh-copy-id kmendez-redhat.com@bastion.8828.openshiftworkshop.com
# Copy private git key to bastion
git clone git@github.com:kmendez-redhat/agnosticd.git

cd agnosticd/ansible

cp configs/openshift-demos/requirements.yml configs/ocp-workloads/

# Update configs/ocp-workloads/requirements.yml with siamaksude. prefix

ansible-playbook install_galaxy_roles.yml -e env_type=ocp-workloads

### SCRIPT START
GUID=8828
DOMAIN="cluster-${GUID}.${GUID}.openshiftworkshop.com"
#TARGET_HOST="bastion.$DOMAIN"
TARGET_HOST="localhost"
MASTER_HOSTNAME="master.$DOMAIN"
MASTER_HOSTNAME="ip-10-0-163-210.ec2.internal"
APPS_DOMAIN="apps.$DOMAIN"
OCP_USERNAME="opentlc-mgr"
#SSH_USER="kmendez-redhat.com"
SSH_USER="ec2-user"
#SSH_PRIVATE_KEY="ocp-workshop.pem"
SSH_PRIVATE_KEY="${GUID}key.pem"
# WORKLOAD SPECIFICS
WORKSHOP_PROJECT="ocp-workshop"
USER_PASSWORD="r3dh4t1!"
GOGS_PASSWORD="openshift"
NUM_USERS=10
ACTION=create
#ACTION=remove

WORKLOAD="ocp4-workload-security-compliance-lab"


# a TARGET_HOST is specified in the command line, without using an inventory file
ansible-playbook -i ${TARGET_HOST}, ./configs/ocp-workloads/ocp-workload.yml \
                 -e"ansible_ssh_private_key_file=~/.ssh/${SSH_PRIVATE_KEY}" \
                 -e"ansible_user=${SSH_USER}" \
                 -e"ocp_username=${OCP_USERNAME}" \
                 -e"ocp_workload=${WORKLOAD}" \
                 -e"guid=${GUID}" \
                 -e"ocp_user_needs_quota=true" \
                 -e"ocp_master=${MASTER_HOSTNAME}" \
                 -e"ocp_apps_domain=${APPS_DOMAIN}" \
                 -e"admin_project=${WORKSHOP_PROJECT}" \
                 -e"user_count=${NUM_USERS}" \
                 -e"user_password=${USER_PASSWORD}" \
                 -e"gogs_password=${GOGS_PASSWORD}" \
                 -e"ACTION=${ACTION}"
### SCRIPT END
