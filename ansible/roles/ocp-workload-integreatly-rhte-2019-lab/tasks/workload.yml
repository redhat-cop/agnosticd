---
- name: Make sure we go back to default project
  shell: "oc project default"

- name: Wait until 3scale API is available 
  uri: 
    url: https://master.{{ ocp_apps_domain }}
    method: HEAD
    validate_certs: no
  register: wait_threescale_result
  until: wait_threescale_result is succeeded
  ignore_errors: yes
  retries: 10
  delay: 60

- name: Create tenants
  include_tasks: ./create-tenants.yml
  with_sequence: start=1 end={{ eval_seed_users_count }} format=user%d
