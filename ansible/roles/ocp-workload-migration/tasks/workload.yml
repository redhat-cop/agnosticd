---
# Implement your Workload deployment tasks here

- name: Setting up workload for user
  debug:
    msg: "Setting up workload for user ocp_username = {{ ocp_username }}"

- name: "Creating controller and operator"
  shell: "oc apply -f {{ repodir.path }}/deploy/non-olm/{{ mig_operator_version }}/{{ item }}"
  loop:
    - "operator.yml"
    - "controller-{{ mig_ocp_version }}.yml"

- name: "Removing controller and operator"
  become: true
  shell: "oc delete --ignore-not-found -f {{ repodir.path }}/deploy/non-olm/{{ mig_operator_version }}/{{ item }}"
  loop:
    - "operator.yml"

# Leave this as the last task in the playbook.
- name: workload tasks complete
  debug:
    msg: "Workload Tasks completed successfully."
  when: not silent|bool
