---

- name: Copying pip requirement file onto towers
  template:
      src: requirements.j2
      dest: /tmp/requirements.txt  
  delegate_to: "{{item}}"
  loop: "{{ query('inventory_hostnames', 'towers') }}"

- name: Updating/Installing pip packages on towers
  shell: >-
    source activate &&
    pip install -r /tmp/requirements.txt -U
  args:
    chdir: "{{tower_update_venv}}/bin"
    executable: /bin/bash
  delegate_to: "{{item}}"
  loop:  "{{ query('inventory_hostnames', 'towers') }}"
  

<<<<<<< HEAD
- name: Updating/Installing pip packages on workers
=======
- name: Copying pip requirement file onto workers
>>>>>>> development
  template:
      src: requirements.j2
      dest: /tmp/requirements.txt  
  delegate_to: "{{item}}"
  loop: "{{ query('inventory_hostnames', 'workers') }}"

<<<<<<< HEAD
- name: Updating boto, boto3 and awscli
=======
- name: Updating/Installing pip packages on workers
>>>>>>> development
  shell: >-
    source activate &&
    pip install -r /tmp/requirements.txt -U
  args:
    chdir: "{{tower_update_venv}}/bin"
    executable: /bin/bash
  delegate_to: "{{item}}"
  loop:  "{{ query('inventory_hostnames', 'workers') }}"