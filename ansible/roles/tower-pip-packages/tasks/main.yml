---

- name: Copying requirement file onto tower
  template:
      src: requirements.j2
      dest: /tmp/requirements.txt  
  delegate_to: "{{item}}"
  loop: "{{ query('inventory_hostnames', 'towers') }}"

- name: Updating boto, boto3 and awscli
  shell: >-
    source activate &&
    pip install -r /tmp/requirements.txt -U
  args:
    chdir: /var/lib/awx/venv/ansible/bin
    executable: /bin/bash
  delegate_to: "{{item}}"
  loop:  "{{ query('inventory_hostnames', 'towers') }}"
  