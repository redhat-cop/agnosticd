# the new manifest based licensing since Tower 3.8+

- name: manifest | include task to grab manifest according to type
  include_tasks:
    file: "man_{{ tower_license_manifest.type }}.yml"

- name: manifest | inject tower license manifest
  awx.awx.tower_license:
    manifest: "{{ __tower_license_path }}"
    #eula_accepted: true  # works only for Tower 3.8 / awx.awx 19.1.0
    tower_host: "https://localhost/"
    tower_username: admin
    tower_password: "{{ hostvars[groups['bastions'][0]]['tower_admin_password'] }}"
    tower_verify_ssl: false
