---
## Publish content view ###
- name: Publish content-view
  command: >-
      hammer content-view publish
      --organization "{{org}}"
      --name "{{ item.content_view }}"
      --async
  when: item.content_view  not in content_view_list.stdout_lines
  loop: "{{ satellite_content }}"
  tags: 
    - configure_satellite
    - configure_satellite_content_view       

# ### Republish content view

- name: Updating Publish content-view (new version)
  command: >-
      hammer content-view publish
      --organization "{{org}}"
      --name "{{ item.content_view }}"
      --async
  when: 
    - item.content_view in content_view_list.stdout_lines
    - item.0.content_view_update | d(false) == True
  loop: "{{ satellite_content }}"
  tags: 
    - configure_satellite
    - configure_satellite_content_view  

