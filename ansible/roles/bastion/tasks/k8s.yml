---
- tags:
    - bastion_k8s
  block:
    - name: Download pip installer
      get_url:
        url: https://bootstrap.pypa.io/get-pip.py
        dest: /tmp/get-pip.py
        mode: 0440

    - name: Run pip installer
      command: python /tmp/get-pip.py

    - name: Remove pip installer
      file:
        path: /tmp/get-pip.py
        state: absent

    - name: Install pip packages
      pip:
        name:
          - virtualenv

    - name: Upgrade pip packages
      pip:
        name:
          - setuptools
        extra_args: --upgrade

    - name: Install OpenShift pip package
      pip:
        name:
          - openshift
        extra_args: --ignore-installed
