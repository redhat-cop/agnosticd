---
# Implement your Pre Workload deployment tasks here

#Workaround removing osrcp-* delete when https://github.com/openshift/openshift-restclient-python/pull/312 merged and have access to latest python restclient
#renaming file
- name: WORKAROUND get file name to delete
  shell: ls /tmp/osrcp*
  register: tempFile
- debug:
    var: tempFile
- name: WORKAROUND delete cache
  file:
    path: "{{ tempFile.stdout }}"
    state: absent
  become: yes
  register: result
- debug:
    var: result
#End Workaround

- name: go get yq
  shell: |
    go get gopkg.in/mikefarah/yq.v2
    alias yq=$(go env | grep GOPATH | cut -d\= -f2 | cut -d\" -f2)/bin/yq.v2

# Leave this as the last task in the playbook.
- name: pre_workload tasks complete
  debug:
    msg: "Pre-Workload tasks completed successfully."
  when: not silent|bool
