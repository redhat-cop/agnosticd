---

- name: Create resource directory
  when: rhel_zero_touch_user_resource_dir_name is defined
  ansible.builtin.file:
    dest: "/home/{{ rhel_zero_touch_user_name }}/{{ rhel_zero_touch_user_resource_dir_name }}"
    owner: "{{ rhel_zero_touch_user_name }}"
    group: "{{ rhel_zero_touch_user_private_group }}"
    mode: 0755
    state: directory

- name: Create user's custom directory
  when: rhel_zero_touch_user_directories is defined
  ansible.builtin.file:
    path: "/home/{{ rhel_zero_touch_user_name }}/{{ __user_dir }}"
    recurse: true
    state: directory
    owner: "{{ rhel_zero_touch_user_name }}"
    group: "{{ rhel_zero_touch_user_private_group }}"
  loop: "{{ rhel_zero_touch_user_directories }}"
  loop_control:
    loop_var: __user_dir
