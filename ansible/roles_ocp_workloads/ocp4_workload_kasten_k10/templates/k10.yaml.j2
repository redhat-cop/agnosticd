---
apiVersion: apik10.kasten.io/v1alpha1
kind: K10
metadata:
  name: {{ ocp4_workload_kasten_name }}
  namespace: {{ ocp4_workload_kasten_namespace }}
spec:
  auth:
{% if ocp4_workload_kasten_authentication_type == "openshift" %}
    openshift:
      dashboardURL: https://{{ ocp4_workload_kasten_name }}-route-kasten-io.{{ openshift_cluster_ingress_domain }}/k10/
      enabled: true
      insecureCA: true
      openshiftURL: https://apiserver.openshift-kube-apiserver.svc.cluster.local
{% elif ocp4_workload_kasten_authentication_type == "htpasswd" %}
    basicAuth:
      enabled: true
      htpasswd: '{{ ocp4_workload_kasten_authentication_htpasswd_string }}'
      secretName: ""
{% endif %}
  global:
    persistence:
      catalog:
        size: ''
      storageClass: ''
  metering:
    mode: ''
  route:
    enabled: true
    host: ''
    tls:
      enabled: true
  excludedApps:
  - assisted-installer
  - cert-manager
  - cert-manager-operator
  - default
  - kube-node-lease
  - kube-public
  - kube-system
  - openshift
  - openshift-apiserver
  - openshift-apiserver-operator
  - openshift-authentication
  - openshift-authentication-operator
  - openshift-cloud-controller-manager
  - openshift-cloud-controller-manager-operator
  - openshift-cloud-credential-operator
  - openshift-cloud-network-config-controller
  - openshift-cloud-platform-infra
  - openshift-cluster-csi-drivers
  - openshift-cluster-machine-approver
  - openshift-cluster-node-tuning-operator
  - openshift-cluster-samples-operator
  - openshift-cluster-storage-operator
  - openshift-cluster-version
  - openshift-cnv
  - openshift-config
  - openshift-config-managed
  - openshift-config-operator
  - openshift-console
  - openshift-console-operator
  - openshift-console-user-settings
  - openshift-controller-manager
  - openshift-controller-manager-operator
  - openshift-dns
  - openshift-dns-operator
  - openshift-etcd
  - openshift-etcd-operator
  - openshift-host-network
  - openshift-image-registry
  - openshift-infra
  - openshift-ingress
  - openshift-ingress-canary
  - openshift-ingress-operator
  - openshift-insights
  - openshift-kni-infra
  - openshift-kube-apiserver
  - openshift-kube-apiserver-operator
  - openshift-kube-controller-manager
  - openshift-kube-controller-manager-operator
  - openshift-kube-scheduler
  - openshift-kube-scheduler-operator
  - openshift-kube-storage-version-migrator
  - openshift-kube-storage-version-migrator-operator
  - openshift-machine-api
  - openshift-machine-config-operator
  - openshift-marketplace
  - openshift-monitoring
  - openshift-multus
  - openshift-network-diagnostics
  - openshift-network-node-identity
  - openshift-network-operator
  - openshift-nfs-provisioner
  - openshift-node
  - openshift-nutanix-infra
  - openshift-oauth-apiserver
  - openshift-openstack-infra
  - openshift-operator-lifecycle-manager
  - openshift-operators
  - openshift-ovirt-infra
  - openshift-ovn-kubernetes
  - openshift-route-controller-manager
  - openshift-service-ca
  - openshift-service-ca-operator
  - openshift-storage
  - openshift-user-workload-monitoring
  - openshift-virtualization-os-images
  - openshift-vsphere-infra