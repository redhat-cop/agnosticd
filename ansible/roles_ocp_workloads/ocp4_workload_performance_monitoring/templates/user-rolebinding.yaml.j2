apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: '{{ user }}-{{ ns }}-admin'
  namespace: '{{ user }}-{{ ns }}'
  labels:
    app: workshop
subjects:
- kind: User
  name: '{{ user  }}'
  namespace: '{{ user }}-{{ ns }}'
roleRef:
  kind: ClusterRole
  name: '{{ workshop_user_role }}'
  apiGroup: rbac.authorization.k8s.io
#---
#kind: Role
#apiVersion: rbac.authorization.k8s.io/v1
#metadata:
#  name: postgres-operator-role
#  namespace: '{{ user }}-{{ ns }}'
#  labels:
#    app: workshop
#rules:
#  - verbs:
#      - '*'
#    apiGroups:
#      - postgres-operator.crunchydata.com
#    resources:
#      - '*'
#---
#kind: RoleBinding
#apiVersion: rbac.authorization.k8s.io/v1
#metadata:
#  name: postgres-operator-rolebinding
#  namespace: '{{ user }}-{{ ns }}'
#  labels:
#    app: workshop
#subjects:
#  - kind: User
#    apiGroup: rbac.authorization.k8s.io
#    name: '{{ user }}'
#roleRef:
#  apiGroup: rbac.authorization.k8s.io
#  kind: Role
#  name: postgres-operator-role