apiVersion: gpte.opentlc.com/v1
kind: Gitea
metadata:
  name: {{ ocp4_workload_gitea_operator_name }}
  namespace: {{ ocp4_workload_gitea_operator_project }}
spec:
  giteaImage: {{ ocp4_workload_gitea_operator_gitea_image }}
  giteaImageTag: {{ ocp4_workload_gitea_operator_gitea_image_tag }}
  giteaVolumeSize: {{ ocp4_workload_gitea_operator_gitea_volume_size }}
  postgresqlVolumeSize: {{ ocp4_workload_gitea_operator_postgresql_volume_size }}
  giteaSsl: {{ ocp4_workload_gitea_operator_ssl_route | bool }}
{% if __ocp4_workload_gitea_operator_gitea_route | default("") | length > 0 %}  
  giteaRoute: {{ __ocp4_workload_gitea_operator_gitea_route }}
{% endif %}
{% if ocp4_workload_gitea_operator_create_admin | bool %}
  giteaAdminUser: {{ ocp4_workload_gitea_operator_admin_user }}
  giteaAdminPassword: {{ ocp4_workload_gitea_operator_admin_password }}
  giteaAdminEmail: {{ ocp4_workload_gitea_operator_admin_email }}
{% endif %}
{% if ocp4_workload_gitea_operator_mailer_enabled | bool %}
  giteaMailerEnabled: true
  giteaMailerFrom: {{ ocp4_workload_gitea_operator_mailer_from }}
  giteaMailerType: {{ ocp4_workload_gitea_operator_mailer_type }}
  giteaMailerHost: {{ ocp4_workload_gitea_operator_mailer_host }}
  giteaMailerUser: {{ ocp4_workload_gitea_operator_mailer_user }}
  giteaMailerPassword: {{ ocp4_workload_gitea_operator_mailer_password }}
  giteaMailerTls: {{ ocp4_workload_gitea_operator_mailer_tls | bool }}
{%   if ocp4_workload_gitea_operator_mailer_helo_hostname | length > 0 %}
  giteaMailerHeloHostname: {{ ocp4_workload_gitea_operator_mailer_helo_hostname }}
{%   endif %}
{% endif %}
  giteaRegisterEmailConfirm: {{ ocp4_workload_gitea_operator_register_email_confirm | bool }}
  giteaEnableNotifyMail: {{ ocp4_workload_gitea_operator_enable_notify_email | bool }}
