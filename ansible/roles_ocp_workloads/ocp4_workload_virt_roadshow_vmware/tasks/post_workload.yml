---
# Implement your Post Workload deployment tasks here
# --------------------------------------------------

- name: Set agnosticd user info data for IBM VMware
  agnosticd_user_info:
    data:
      preinstall_operators: "{{ preinstall_operators }}"
      vcenter_user: "{{ hostvars['localhost']['vcenter_student_username'] }}@{{ vcenter_domain }}"
      vcenter_password: "{{ hostvars['localhost']['vcenter_student_password'] }}"
      vcenter_console: "{{ hostvars['localhost']['vcenter_hostname'] }}"
      vcenter_datastore: "{{ hostvars['localhost']['vcenter_datastore'] }}"
      guid: "{{ guid }}"

# Leave these as the last tasks in the playbook
# ---------------------------------------------

# For deployment onto a dedicated cluster (as part of the
# cluster deployment) set workload_shared_deployment to False
# This is the default so it does not have to be set explicitely
- name: post_workload tasks complete
  debug:
    msg: "Post-Workload tasks completed successfully."
  when:
  - not silent|bool
  - not workload_shared_deployment|default(False)

# For RHPDS deployment (onto a shared cluster) set
# workload_shared_deployment to True
# (in the deploy script or AgnosticV configuration)
- name: post_workload tasks complete
  debug:
    msg: "Post-Software checks completed successfully"
  when:
  - not silent|bool
  - workload_shared_deployment|default(False)
