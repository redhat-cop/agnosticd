---
- name: Create Devspaces application
  kubernetes.core.k8s:
    state: present
    definition: "{{ lookup('template', 'application-devspaces.yml.j2' ) | from_yaml }}"

- name: Setup Devspaces use namespaces
  include_tasks:
    file: ./create_devspace_user_namespaces.yml
  loop:
  - "{{ ocp4_workload_redhat_developer_hub_admin_user }}"
  - "{{ ocp4_workload_redhat_developer_hub_dev_user }}"
  loop_control:
    loop_var: devspace_user
