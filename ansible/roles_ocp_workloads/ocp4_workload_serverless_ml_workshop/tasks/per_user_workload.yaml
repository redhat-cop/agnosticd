---
# Implement your Workload deployment tasks here

- name: Make sure project "{{ t_user_project }}" is there
  k8s:
    state: present
    name: "{{ t_user_project }}"
    kind: Project
    api_version: project.openshift.io/v1

- name: Assign "{{ t_user }}" as admin
  k8s:
    state: present
    definition: "{{ lookup('template', './templates/rbac.j2' ) }}"
  vars:
    name: "{{ t_user }}"
    namespace: "{{ t_user_project }}"

# Assign roles for each user

# Create object volume claim for each user project

# Upload model for each user project

# Leave this as the last task in the playbook.
- name: workload tasks complete
  debug:
    msg: "Workload Tasks completed successfully."
  when: not silent | bool
