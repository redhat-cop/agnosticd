kind: List
metadata:
  resourceVersion: ""
  selfLink: ""
apiVersion: v1
items:
- apiVersion: v1
  kind: PersistentVolumeClaim
  metadata:
  name: workspace-pvc
  namespace: "{{ ocp4_workload_coolstore_apac_summit_coolstore_namespace }}"
  spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
    storage: 1Gi
  storageClassName: gp2
  volumeMode: Filesystem
- apiVersion: triggers.tekton.dev/v1alpha1
  kind: EventListener
  metadata:
  name: el-coolstore
  namespace: "{{ ocp4_workload_coolstore_apac_summit_coolstore_namespace }}"
  spec:
  triggers:
  - name: coolstore-trigger
      bindings:
      - ref: "coolstore-binding"
      template:
      ref: "coolstore-template"
- apiVersion: triggers.tekton.dev/v1alpha1
  kind: TriggerBinding
  metadata:
  name: "coolstore-binding"
  namespace: "{{ ocp4_workload_coolstore_apac_summit_coolstore_namespace }}"
  spec:
  params:
  - name: git-repo-url
      value: \$(body.repository.clone_url)
  - name: git-revision
      value: \$(body.after)
- apiVersion: triggers.tekton.dev/v1alpha1
  kind: TriggerTemplate
  metadata:
  name: "coolstore-template"
  namespace: "coolstore"
  spec:
  resourcetemplates:
  - apiVersion: tekton.dev/v1beta1
      kind: PipelineRun
      metadata:
      annotations:
        pipeline.openshift.io/started-by: admin
      labels:
        tekton.dev/pipeline: web-ui-ci-pipeline
      generateName: web-ui-ci-
      namespace: "{{ ocp4_workload_coolstore_apac_summit_coolstore_namespace }}"
      spec:
      params:
      - name: IMAGE_NAME
        value: image-registry.openshift-image-registry.svc:5000/coolstore/web-ui
      - name: GIT_REPO_URL
        value: "{{ _ocp4_workload_coolstore_apac_summit_repo_coolstore_argocd_repo_url }}"
      - name: GIT_REPO_REVISION
        value: main
      - name: COOLSTORE_WEB_URI
        value:  "{{ _ocp4_workload_coolstore_apac_summit_web_ui_host }}"
      pipelineRef:
        name: web-ui-ci-pipeline
      serviceAccountName: pipeline
      timeout: 1h0m0s
      workspaces:
      - name: workspace
        persistentVolumeClaim:
          claimName: workspace-pvc
