---
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: {{ ocp4_workload_showroom_name }}-{{ guid }}
  namespace: openshift-gitops
  finalizers:
  - resources-finalizer.argocd.argoproj.io
spec:
  destination:
    name: ''
    namespace: {{ ocp4_workload_showroom_name }}-{{ guid }}
    server: 'https://kubernetes.default.svc'
  project: default
  syncPolicy:
    syncOptions:
    - CreateNamespace=true
    automated:
      prune: false
      selfHeal: false
  source:
    repoURL: {{ ocp4_workload_showroom_chart_repo_url }}
    targetRevision: main
    path: charts
    helm:
      values: |
        namespace:
          create: false
          name: {{ ocp4_workload_showroom_name }}-{{ guid }}
        deployer:
          domain: {{ _deployer_domain }}
        documentation:
          repoUrl: {{ showroom_repo_url }}
        general:
          guid: {{ guid }}
        content:
          repoUrl: {{ ocp4_workload_showroom_git_repo }}
          user_data: {{ _showroom_user_data | to_nice_yaml }}"
  syncPolicy:
    automated: {}
