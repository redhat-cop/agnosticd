[bastions]
{% for host in groups['bastions'] %}
{% if cloud_provider == 'ec2' %}
{{ host }} ansible_connection=local
{% elif cloud_provider == 'osp' %}
{{ host }}.example.com ansible_connection=local
{% endif %}
{% endfor %}

[towers]
{% for host in groups['towers'] %}
{% if cloud_provider == 'ec2' %}
{{ host }}
{% elif cloud_provider == 'osp' %}
{{ host }}.example.com 
{% endif %}
{% endfor %}

[utilities]
{% for host in groups['utilities'] %}
{% if cloud_provider == 'ec2' %}
{{ host }}
{% elif cloud_provider == 'osp' %}
{{ host }}.example.com 
{% endif %}
{% endfor %}

[frontends]
{% for host in groups['frontends'] %}
{% if cloud_provider == 'ec2' %}
{{ host }}
{% elif cloud_provider == 'osp' %}
{{ host }}.example.com 
{% endif %}
{% endfor %}

[apps]
{% for host in groups['apps'] %}
{% if cloud_provider == 'ec2' %}
{{ host }}
{% elif cloud_provider == 'osp' %}
{{ host }}.example.com 
{% endif %}
{% endfor %}

[appdbs]
{% for host in groups['appdbs'] %}
{% if cloud_provider == 'ec2' %}
{{ host }}
{% elif cloud_provider == 'osp' %}
{{ host }}.example.com 
{% endif %}
{% endfor %}

[testservers]
{% for host in groups['testservers'] %}
{% if cloud_provider == 'ec2' %}
{{ host }}
{% elif cloud_provider == 'osp' %}
{{ host }}.example.com 
{% endif %}
{% endfor %}