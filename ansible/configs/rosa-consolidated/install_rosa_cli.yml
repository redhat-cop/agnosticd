---
- name: Get ROSA CLI
  ansible.builtin.get_url:
    url: "{{ rosa_installer_url }}"
    dest: /tmp/rosa-linux.tar.gz

- name: Unzip rosa-linux.tar.gz
  become: true
  ansible.builtin.unarchive:
    src: /tmp/rosa-linux.tar.gz
    dest: /usr/local/bin/
    remote_src: true

- name: cleanup archive file
  ansible.builtin.file:
    path: /tmp/rosa-linux.tar.gz
    state: absent

- name: Create rosa Bash completion file
  become: true
  shell: /usr/local/bin/rosa completion bash >/etc/bash_completion.d/rosa
