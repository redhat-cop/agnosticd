---
# support public DNS:
# host-GUID.zone.com
# host.GUID.zone.com
# host-GUID.GUID.zone.com
- loop:
    - "{{ _instance.metadata.hostname | regex_replace('-' ~ guid ~ '$', '.' + guid) }}"
    - "{{ _instance.metadata.hostname | regex_replace('-' ~ guid ~ '$', '.' + guid) }}"
    - "{{ _instance.metadata.hostname | regex_replace('-' ~ guid ~ '$', '-' ~ guid ~ '.' + guid) }}"
  loop_control:
    loop_var: _dns
  include_tasks: dns_loop.yml
