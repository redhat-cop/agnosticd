---
controller_settings:
  - name: ALLOW_JINJA_IN_EXTRA_VARS
    value: "alwys"

# Not working in 2.5
# controller_organizations: (according to example)
# aap_organizations: (according to docu)
# - name: SAP Demo
#   description: Organisation for Demo

controller_credential_types:
  - name: SAP S-User
    description: Communication with SAP API
    kind: cloud
    inputs:
      fields:
        - id: suser_id
          type: string
          label: "SAP S-User ID"
          secret: false
        - id: suser_password
          type: string
          label: "SAP S-User password"
          secret: true
      required:
        - suser_id
        - suser_password
    injectors:
      extra_vars:
        suser_id: '{{ "{{ suser_id }}" }}'
        suser_password: '{{ "{{ suser_password }}" }}'
      env:
        SAP_SUPPORT_DOWNLOAD_PASSWORD: '{{ "{{ suser_password }}" }}'
        SAP_SUPPORT_DOWNLOAD_USERNAME: '{{ "{{ suser_id }}" }}'

controller_credentials:
  - name: "Server Login"
    description: Machine Credential example with become_method input
    credential_type: Machine
    inputs:
      username: "{{ remote_user }}"
      password: "{{ lookup('file', '{{ hostvars.localhost.ssh_provision_key_path }}') }}"
      become_method: sudo

  - name: "SAP S-User Credential"
    description: "used for downloading SAP-Software"
    organization: "Default"
    credential_type: "SAP S-User"
    inputs:
      suser_id: "{{ my_suser| d('S012345') }}"
      suser_password: "{{ my_spass | d('xyz') }}"

controller_projects:
 - name: SAP Demo Project
   organization: Default
   scm_branch: main
   scm_clean: 'no'
   scm_delete_on_update: 'no'
   scm_type: git
   scm_update_on_launch: 'no'
   scm_url: https://github.com/redhat-sap/demo.sap_install

controller_inventories:
 - name: SAP Demo
   organization: Default
   description: SAP Demo hosts
   variables:
     sap_domain: example.com
   hosts:
     - name: "{{ ansible_hana1_hostname }}"
       description: "Primary SAP HANA Host"
     - name: "{{ ansible_hana2_hostname }}"
       description: "Primary SAP HANA Host"
     - name: "{{ ansible_s4hana_hostname }}"
       description: "SAP S/4HANA Host"
   groups:
     - name: "sap"
       hosts:
         - name: "{{ ansible_hana1_hostname }}"
         - name: "{{ ansible_hana2_hostname }}"
         - name: "{{ ansible_s4hana_hostname }}"
     - name: "hanas"
       hosts:
         - name: "{{ ansible_hana1_hostname }}"
         - name: "{{ ansible_hana2_hostname }}"
     - name: "s4hanas"
       hosts:
         - name: "{{ ansible_s4hana_hostname }}"
...
