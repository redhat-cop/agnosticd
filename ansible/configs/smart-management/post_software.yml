- name: Step 00xxxxx post software
  hosts: localhost
  gather_facts: False
  become: yes
  tasks:
    - debug:
        msg: "Post-Software tasks Started"

- name: Setup Workloads on Tower
  import_playbook: tower_workloads.yml

- name: Setup Workloads on satellite
  import_playbook: satellite_workloads.yml

- name: Step lab post software deployment
  hosts: satellites,bastions
  become: yes
  tasks:
    - name: Following are satellite login details
      debug:
        msg: |
          Satellite Login details
          URL: https://{{publicname}}
          Username: {{satellite_admin }}
          Password: {{satellite_admin_password }} 
      when: inventory_hostname in groups['satellites']
    
    - name: Following are tower login details
      debug:
        msg: |
          Tower Login details
          URL: https://{{inventory_hostname}}.{{osp_cluster_dns_zone}}
          Username: admin 
          Password: {{tower_admin_password }} 
      when: inventory_hostname in groups['bastions']


- name: PostSoftware flight-check
  hosts: localhost
  connection: local
  gather_facts: false
  become: false
  tags:
    - post_flight_check
  tasks:

    - debug:
        msg: "Post-Software checks completed successfully"
  
   

