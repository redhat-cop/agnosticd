---
- name: ensure infoblox.nios collection is installed
  command: ansible-galaxy collection install infoblox.nios_modules:==1.0.2 --force

- name: ensure infoblox-client python client is installed
  pip:
    name: infoblox-client
    executable: "{{ pip_executable }}"

- name: configure a network container
  nios_network:
    network: 10.0.0.0/8
    container: true
    comment: Created by Ansible NIOS Lab deployment
    state: present
    provider:
      host: "{{ groups['nios'][0] | regex_replace('\\..*$') }}.{{ guid }}.{{ osp_cluster_dns_zone }}"
      username: admin
      password: "{{ nios_admin_password }}"
