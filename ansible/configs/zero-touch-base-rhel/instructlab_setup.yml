- name: Install instructlab into the specified (virtualenv)
  ansible.builtin.pip:
    name: git+https://github.com/instructlab/instructlab.git@v0.19.3
    virtualenv: /instructlab/venv/bin/activate
    virtualenv_site_packages: yes
    executable: pip3.3

- name: Execute ilab command for initial configuration
  ansible.builtin.command: /instructlab/venv/bin/ilab config init

- name: Execute ilab command to download Granite
  ansible.builtin.command: /instructlab/venv/bin/ilab model download --repository instructlab/granite-7b-lab-GGUF --filename=granite-7b-lab-Q4_K_M.gguf

- name: Execute ilab command to download Merlinite
  ansible.builtin.command: /instructlab/venv/bin/ilab model download --repository instructlab/merlinite-7b-lab-GGUF --filename=merlinite-7b-lab-Q4_K_M.gguf
