---
- include_tasks: authentication.yaml
  when: openshift_cnv_username | default(false)

- block:
    - ansible.builtin.include_tasks: create_inventory.yaml
  module_defaults:
    group/k8s:
      host: "{{ openshift_cnv_api_uri }}"
      api_key: "{{ k8s_auth_results.k8s_auth.api_key|default(openshift_cnv_sa_token) }}"
      validate_certs: false
